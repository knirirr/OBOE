module ApplicationHelper
  def cookie_waffle
    string = '<script type="text/javascript">var fadeTime=200;var t,u;var over=false;var showByDefault=true;var position="";var shape="";if(getCookie("civicShowCookieIcon")!=="no"){addLoadEvent(initShowCookieWidget)}function addLoadEvent(a){var b=window.onload;if(typeof window.onload!=="function"){window.onload=a}else{window.onload=function(){b();a()}}}function get(s){return document.getElementById(s)}function getStyle(c,d){if(document.defaultView){return document.defaultView.getComputedStyle(c,null).getPropertyValue(d)}else if(c.currentStyle){d=d.replace(/-(\w)/gi,function(a,b){return b.toUpperCase()});return c.currentStyle[d]}else{return null}}function getOpacity(a){var b=getStyle(a,"filter");var c=getStyle(a,"opacity");var d=getStyle(a,"MozOpacity");var e=getStyle(a,"KhtmlOpacity");if(b!=="none"){opt=b.replace(/[^\d]+/g,"")}else{opt=(c!==null)?c:((d!==null)?d:e);opt=opt*100}return opt}function opacityTo(a,v){a.style.opacity=v;a.style.MozOpacity=v;a.style.KhtmlOpacity=v;a.style.filter=" alpha(opacity ="+v*100+")"}function f(e){var f=get(e);if(!f){return}f.fadeIn=function(a,b,c){var d=this;d.style.zoom=1;d.style.display="block";if(!d.style.opacity)d.style.opacity=0;dir=1;if(c)dir=-1;u=null;u=setInterval(function(){opacityTo(d,parseFloat(d.style.opacity)+(0.05*dir));if(d.style.opacity>1){d.style.opacity=1;clearInterval(u);if(b!==undefined){b.call(d)}}else if(c===true&&d.style.opacity<0.05){d.style.display="none";d.style.opacity=0;clearInterval(u);if(b!==undefined){b.call(d)}}},a/20)};f.fadeOut=function(a,b){f.fadeIn(a,b,true)};return f}function initShowCookieWidget(){var a=document.createElement("style");a.type="text/css";if(a.styleSheet){a.styleSheet.cssText=css}else{a.appendChild(document.createTextNode(css))}document.getElementsByTagName("head")[0].appendChild(a);var b=document.createElement("div");b.innerHTML=html;document.getElementsByTagName("body")[0].appendChild(b);var c=get("ccc-icon");var d=get("ccc-state");c.style.display="block";if(getCookie("civicAllowCookies")==="yes"){d.setAttribute("class","ccc-go");c.style.backgroundPositionY="-72px"}else{d.setAttribute("class","ccc-pause");c.style.backgroundPositionY="0"}c.onclick=function(){if(getOpacity(get("ccc-widget"))===0){f("ccc-widget").fadeIn(fadeTime)}else{f("ccc-widget").fadeOut(fadeTime)}};get("ccc-close").onclick=function(){f("ccc-widget").fadeOut(fadeTime)};get("ccc-widget").onmouseover=function(){clearInterval(u);f("ccc-widget").fadeIn(fadeTime)};get("ccc-go").onclick=function(){clearTimeout(t);t=setTimeout("f(\"ccc-widget\").fadeOut(fadeTime)",400);d.setAttribute("class","ccc-go");c.style.backgroundPositionY="-72px";document.cookie="civicAllowCookies=yes;path=/";checkShowIconState(c);return false};get("ccc-pause").onclick=function(){clearTimeout(t);d.setAttribute("class","ccc-pause");c.style.backgroundPositionY="0";document.cookie="civicAllowCookies=no;path=/";checkShowIconState(c)};get("ccc-stop").onclick=function(){document.cookie="civicAllowCookies=no;path=/";checkShowIconState(c);window.home();return false};if("TRUE"==="TRUE"&&getCookie("civicShowByDefaultDone")!=="yes"){f("ccc-widget").fadeIn(1000,function(){document.cookie="civicShowByDefaultDone=yes;path=/";t=setTimeout("f(\"ccc-widget\").fadeOut(3000);",3000)})}}function getCookie(a){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x===a){return unescape(y)}}}function checkShowIconState(a){if(get("ccc-hide-icon").checked){document.cookie="civicShowCookieIcon=no";t=setTimeout("f(\"ccc-icon\").fadeOut(fadeTime)",400)}else{document.cookie="civicShowCookieIcon=yes"}}var css = "#ccc-container div{font:12px/16px sans-serif;margin:0;border:0;text-align:left}#ccc-icon{background:transparent url(http://www.civicuk.com/assets/images/backgrounds/ccc-icons.gif) no-repeat 0 0;cursor:pointer;height:52px;padding:10px;width:52px;display:none}#ccc-container{bottom:0;left:0;position:fixed}* html #ccc-icon,* html #ccc-widget{position:absolute;top:expression(eval(document.compatMode && document.compatMode==\"CSS1Compat\") ? documentElement.scrollTop+(documentElement.clientHeight-this.clientHeight):document.body.scrollTop+(document.body.clientHeight-this.clientHeight))}#ccc-container.right{left:auto;right:0;}#ccc-container.right #ccc-icon{left:auto;right:0}#ccc-container .ccc-go #ccc-icon{background-position:0 -72px}#ccc-icon.triangle{background-position:-72px 0}#ccc-container .ccc-go #ccc-icon.triangle{background-position:-72px -72px}#ccc-container.right #ccc-icon.triangle{background-position:-144px 0}#ccc-container.right .ccc-go #ccc-icon.triangle{background-position:-144px -72px}#ccc-widget{border-radius:5px;bottom:10px;box-shadow:0 0 3px rgba(0,0,0,0.2);display:none;font:12px/16px sans-serif;left:70px;opacity:0;position:fixed;width:250px;z-index:5000}#ccc-container.right #ccc-widget{left:auto;right:70px}#ccc-widget-body{background:#f0f0f0;border:1px solid #ccc;border-radius:0 0 5px 5px;border-top:0;color:#888;padding:1em 20px}#ccc-widget-body ul{padding:0;margin:0;}#ccc-widget-head{border:1px solid #d47c18;border-radius:5px 5px 0 0;background:#f0942b url(http://www.civicuk.com/assets/images/backgrounds/widget.gif) no-repeat right -65px;height:65px}.ccc-go #ccc-widget #ccc-widget-head{background-position:right top;border-color:#5e9912}#ccc-widget-head h2{text-indent:-999em;margin:0;}#ccc-widget p{margin:0 0 1em}#ccc-widget a{color:#f0942b}#ccc-widget ul li{background:#bbb;border:1px solid #999;border-radius:6px;color:#fff;font-size:1.2em;font-weight:bold;margin-bottom:10px;padding:1px}#ccc-widget ul li a{background:#999;border:1px solid #aaa;border-radius:5px;color:#fff;display:block;height:32px;line-height:32px;padding-left:44px;text-decoration:none}#ccc-widget ul li.go{background-color:#bfe483;border-color:#8fca43}#ccc-widget ul li.go a{background:#8fca43 url(http://www.civicuk.com/assets/images/backgrounds/widget.gif) no-repeat left -135px;border-color:#9dd256}#ccc-widget ul li.go a:hover{background-color:#9dd256}#ccc-widget ul li.pause{background:#f6b143;border-color:#f0942b}#ccc-widget ul li.pause a{background:#f0942b url(http://www.civicuk.com/assets/images/backgrounds/widget.gif) no-repeat left -175px;border-color:#f29f34}#ccc-widget ul li.pause a:hover{background-color:#f29f34}#ccc-widget ul li.stop{background:#e86158;border-color:#db3332}#ccc-widget ul li.stop a{background:#db3332 url(http://www.civicuk.com/assets/images/backgrounds/widget.gif) no-repeat left -215px;border-color:#e14742}#ccc-widget ul li.stop a:hover{background-color:#e14742}#ccc-widget a#ccc-close{background:#fff url(http://www.civicuk.com/assets/images/backgrounds/widget.gif) no-repeat -9px -258px;border:1px solid #ccc;border-radius:25px;box-shadow:0 0 3px rgba(0,0,0,0.2);color:#b4b4b4;cursor:pointer;display:block;font-size:30px;height:20px;line-height:24px;position:absolute;right:-10px;text-align:center;top:-10px;width:20px;text-indent:-999em;}#ccc-widget .show-icon{color:#464646;font-weight:bold;text-align:center}#ccc-widget p.about{text-align:right;margin:10px 0 0 0}#ccc-widget .show-icon label{margin-right:12px;float:none;padding:0;width:auto;}#ccc-widget input{background:#fff;border:0;clear:none;float:none;height:auto;margin:0;padding:0;width:auto;}";var html = "<div id=\"ccc-container\" class=\"left\"><div id=\"ccc-state\" class=\"ccc-pause\"><div id=\"ccc-icon\" class=\"triangle\"></div><div id=\"ccc-widget\"><div id=\"ccc-widget-head\"><h2>Cookie Control</h2></div><div id=\"ccc-widget-body\"><p>This site uses cookies to store information on your computer. Some of these cookies are essential to make our site work.</p><p>By using our site you accept the terms of our <a href=\"https://oboe.oerc.ox.ac.uk/privacy-policy\">Privacy Policy</a>.</p><ul><li class=\"go\"><a href=\"#\" id=\"ccc-go\">I\'m happy with this</a></li><li class=\"pause\"><a href=\"http://civicuk.com/cookie-law/browser-settings\" target=\"_blank\" id=\"ccc-pause\">Browser settings</a></li></ul><div class=\"show-icon\">Show the cookie icon?<br /><label><input id=\"ccc-show-icon\" type=\"radio\" checked=\"checked\" name=\"showicon\" value=\"Y\"/> Yes</label><label><input id=\"ccc-hide-icon\" type=\"radio\" name=\"showicon\" value=\"N\"/> No</label></div><p class=\"about\"><a href=\"http://civicuk.com/cookie-law/index\" target=\"_blank\">About Cookie Control</a></p></div><a id=\"ccc-close\">x</a></div></div></div>";</script>'
    return string;

  end
end
